import streamlit as st

# 동물별 질병 데이터베이스
disease_db = {
    "개": {
        "홍역": {
            "설명": "바이러스 감염으로 여러 장기에 심각한 영향을 주는 전염병.",
            "증상": "고열, 콧물, 눈곱, 기침, 구토, 설사, 피부 발진, 경련, 마비",
            "처치": "완치가 어려워 증상 완화 및 합병증 예방 치료가 필요. 예방접종이 최선."
        },
        "심장사상충": {
            "설명": "모기가 옮기는 기생충으로, 심장과 폐혈관에 기생.",
            "증상": "기침, 운동량 감소, 호흡곤란, 복수",
            "처치": "주사 치료나 수술이 필요할 수 있음. 매달 예방약 복용 필수."
        },
        "링웜": {
            "설명": "곰팡이 감염으로 생기는 피부병. 사람에게도 옮을 수 있음.",
            "증상": "둥글게 털 빠짐, 비듬, 붉은 반점, 가려움",
            "처치": "항진균제 연고/먹는 약 사용 + 환경 소독 필요."
        }
    },
    "고양이": {
        "백혈병 바이러스(FeLV)": {
            "설명": "고양이끼리 침, 혈액으로 전염되는 바이러스 질환.",
            "증상": "식욕부진, 체중 감소, 빈혈, 림프절 비대, 구강염, 종양 가능",
            "처치": "완치 불가. 면역력 유지 및 증상 관리. 예방접종 가능."
        },
        "심장사상충": {
            "설명": "고양이도 감염되는 모기 매개 기생충.",
            "증상": "기침, 호흡곤란, 무기력, 구토",
            "처치": "치료는 제한적. 예방약 복용이 최선."
        },
        "링웜": {
            "설명": "곰팡이 감염으로 피부/털 손상. 인수공통감염병.",
            "증상": "원형 탈모, 각질, 가려움",
            "처치": "항진균제 사용, 환경 청결 유지."
        }
    },
    "토끼": {
        "콕시듐증": {
            "설명": "기생충 감염으로 장에 염증을 일으킴.",
            "증상": "설사, 체중 감소, 탈수",
            "처치": "항콕시듐제 투여 필요. 청결한 환경 유지."
        },
        "파스튜렐라증": {
            "설명": "세균 감염으로 호흡기 질환을 일으킴.",
            "증상": "재채기, 콧물, 호흡 곤란",
            "처치": "항생제 치료 필요. 스트레스 최소화."
        }
    },
    "햄스터": {
        "볼주머니염": {
            "설명": "볼주머니에 음식/이물질이 끼어 발생하는 염증.",
            "증상": "볼이 부음, 먹기 힘들어함",
            "처치": "이물질 제거 및 항생제 필요. 수의사 진료 권장."
        },
        "피부진드기": {
            "설명": "진드기 감염으로 피부 문제 발생.",
            "증상": "심한 가려움, 털빠짐, 상처",
            "처치": "진드기 약 사용, 우리 청소 필수."
        }
    }
}

# ------------------------------
# Streamlit UI
# ------------------------------
st.title("🐾 반려동물 증상 도우미")
st.warning("⚠️ 참고용 정보이며, 반려동물의 이상 시 반드시 수의사 진료가 필요합니다.")

# 동물 선택
animal = st.selectbox("동물을 선택하세요", list(disease_db.keys()))

# 증상 입력
symptom = st.text_input("증상을 입력하세요 (예: 설사, 기침, 가려움)")

# 결과 출력
if st.button("진단하기"):
    found = False
    for disease, info in disease_db[animal].items():
        if symptom in info["증상"]:  # 증상이 질병 데이터에 포함되어 있으면 매칭
            st.subheader(f"📌 예상 질병: {disease}")
            st.write(f"**어떤 병?** {info['설명']}")
            st.write(f"**주요 증상:** {info['증상']}")
            st.write(f"**응급 처치 방법:** {info['처치']}")
            found = True
    if not found:
        st.warning("해당 증상에 대한 데이터가 없습니다. 꼭 수의사 상담을 권장합니다.")
